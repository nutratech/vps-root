server {
    listen 80;
    server_name git.nutra.tk;

    # Define the root directory for non-Git content (optional)
    root /var/www/html;
    index index.html;

    # Directory for Git repositories
    set $git_root /srv/git;

    # Serve Git repositories under /git/
    location ~ ^/git/([^/]+\.git)(/.*)?$ {
        include fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /usr/lib/git-core/git-http-backend;
        fastcgi_param GIT_PROJECT_ROOT $git_root;
        fastcgi_param GIT_HTTP_EXPORT_ALL "1"; # Allow access without git-daemon-export-ok
        fastcgi_param PATH_INFO /$1$2; # Repo name + subpath (e.g., /myrepo.git/info/refs)
        fastcgi_param REQUEST_METHOD $request_method;
        fastcgi_param QUERY_STRING $query_string;
        fastcgi_pass unix:/var/run/fcgiwrap.socket;
    }
}
